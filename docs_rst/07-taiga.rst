Taiga
=======
Para a instalação do funcionar corretamente com outras aplicações as portas necessárias devem estar abertas para a máquina virtual que acessá-la

Taiga-Vagrant
=========

Clone the taiga-vagrant repository

   $ git clone https://github.com/mes-2016-1/taiga-vagrant.git

Boot the VM environment running this command on terminal

   $ vagrant up


Colab configuration
=========

Configure an IP address on your Colab machine before proceeding with the Nginx configuration.

   config.vm.network "private_network", ip: "172.28.124.4"

Clone the colab-taiga-plugin repository

   $ git clone https://github.com/mes-2016-1/colab-taiga-plugin.git

Open the colab_taiga_plugin folder insie the colab VM and install the plugin

   $ pip install -e .

If the directory /etc/nginx/conf.d/ does not exists, create it:

   $ sudo mkdir /etc/nginx/conf.d

Make sure that nginx have included the /nginx/conf.d configuration files by opening /etc/nginx/nginx.conf and checking
if this line is present:

   include /etc/nginx/conf.d/*.conf;

Create colab.conf inside nginx conf.d folder

   $ sudo vim /etc/nginx/conf.d/colab.conf

Add the following code to the colab file and save it. Please attent to the port that are defined here, if you change this port because it is busy, be aware to call the right port.

**OBS.:** The tag 'location /v-1463481183206' is generated by Taiga, and represent the static files path. The version changes every time the taiga-front is built. Double check the folder version inside taiga-front/dist, in the home directory of yout taiga vagrant machine. 

The 172.28.124.3 is the ip of the taiga-vagrant machine. Make sure that the IP addresses correctly point to both of your machines.
   
   .. code-block::
   
    server {
      listen                8001;
      server_name           _;

      access_log            /var/log/nginx/colab.access.log;
      error_log             /var/log/nginx/colab.error.log;

      location / {
        proxy_pass http://0.0.0.0:8000;
      }

      location /v-1463481183206 {
        proxy_pass http://172.28.124.3;
      }

      location = /conf.json {
        proxy_pass http://172.28.124.3;
      }
    }

Copy taiga.py to /etc/colab/plugins.d/

   cp /plugins/colab-taiga-plugin/tests/plugins.d/taiga.py /etc/colab/plugins.d/

Open the taiga.py file

   $ vim /etc/colab/plugins.d/taiga.py

Change the upstream to the following and save the file

   upstream = 'http://172.28.124.3'

Restart the nginx service

   $ sudo service nginx restart
